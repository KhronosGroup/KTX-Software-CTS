{
    "description": "Test cli argument combinations and incorrect usages.",
    "command": "ktx create --testrun ${subcase[flags]}",
    "status": "${subcase[rc]}",
    "stdout": "golden/create/cli_errors/empty.out.txt",
    "stderr": "golden/create/cli_errors/${subcase[id]}.err.txt",
    "args": {
        "subcase": [
            { "rc": 1, "id": "missing_inputs_output", "flags": "" },
            { "rc": 1, "id": "missing_output", "flags": "input/png/basic_RGB8_16x16.png" },
            { "rc": 1, "id": "missing_format", "flags": "input/png/basic_RGB8_16x16.png output.ktx2" },
            { "rc": 1, "id": "unsupported_format", "flags": "--format PVRTC2_4BPP_SRGB_BLOCK_IMG input/png/basic_RGB8_16x16.png output.ktx2" },
            { "rc": 1, "id": "prohibited_format", "flags": "--format R16G16B16A16_SSCALED input/png/basic_RGB8_16x16.png output.ktx2" },
            { "rc": 1, "id": "unknown_option", "flags": "--unknown --format R8_UNORM input/png/basic_RGB8_16x16.png output.ktx2" },
            { "rc": 4, "id": "missing_input_file", "flags": "--format R8_UNORM input/png/missing_file.png output.ktx2" },
            { "rc": 1, "id": "stdin_more_than_once_1", "flags": "--format R8_UNORM --layers 2 --stdin - output.ktx2" },
            { "rc": 1, "id": "stdin_more_than_once_2", "flags": "--format R8_UNORM --layers 2 - - output.ktx2" },

            { "rc": 1, "id": "width0", "flags": "--raw --width 0 --height 8 --format R8_UNORM raw_R8_UNORM_2D_8x8.raw output.ktx2" },
            { "rc": 1, "id": "height0", "flags": "--raw --width 8 --height 0 --format R8_UNORM raw_R8_UNORM_2D_8x8.raw output.ktx2" },
            { "rc": 1, "id": "layers0", "flags": "--raw --layers 0 --width 8 --height 8 --format R8_UNORM raw_R8_UNORM_2D_8x8.raw output.ktx2" },
            { "rc": 1, "id": "depth0", "flags": "--raw --depth 0 --width 8 --height 8 --format R8_UNORM raw_R8_UNORM_2D_8x8.raw output.ktx2" },
            { "rc": 1, "id": "levels0", "flags": "--raw --levels 0 --width 8 --height 8 --format R8_UNORM raw_R8_UNORM_2D_8x8.raw output.ktx2" },
            { "rc": 1, "id": "1d_but_raw_height_not_1", "flags": "--1d --raw --width 2 --height 2 --format R8_UNORM input/png/basic_RGB8_16x16.png output.ktx2" },
            { "rc": 3, "id": "1d_but_img_height_not_1", "flags": "--1d --format R8_UNORM input/png/basic_RGB8_16x16.png output.ktx2" },
            { "rc": 1, "id": "3d_array", "flags": "--layers 2 --depth 2 --format R8_UNORM input/png/basic_RGB8_16x16.png output.ktx2" },
            { "rc": 1, "id": "3d_array_with_1s", "flags": "--layers 1 --depth 1 --format R8_UNORM input/png/basic_RGB8_16x16.png output.ktx2" },
            { "rc": 1, "id": "3d_cube", "flags": "--cubemap --depth 2 --format R8_UNORM input/png/basic_RGB8_16x16.png output.ktx2" },
            { "rc": 1, "id": "raw_without_width", "flags": "--raw --height 16 --format R8_UNORM input/png/basic_RGB8_16x16.png output.ktx2" },
            { "rc": 1, "id": "raw_without_height", "flags": "--raw --width 16 --format R8_UNORM input/png/basic_RGB8_16x16.png output.ktx2" },
            { "rc": 1, "id": "too_many_levels_nonraw", "flags": "--levels 5 --format R8_UNORM input/png/basic_RGB8_8x8.png input/png/basic_RGB8_4x4.png input/png/basic_RGB8_2x2.png input/png/basic_RGB8_1x1.png input/png/basic_RGB8_1x1.png output.ktx2" },
            { "rc": 1, "id": "too_many_levels_raw", "flags": "--raw --levels 5 --width 8 --height 8 --format R8_UNORM raw_R8_UNORM_2D_8x8.raw raw_R8_UNORM_2D_4x4.raw raw_R8_UNORM_1D_4.raw raw_R8_UNORM_1D_1.raw raw_R8_UNORM_1D_1.raw output.ktx2" },
            { "rc": 1, "id": "runtime_mipmap_with_levels", "flags": "--runtime-mipmap --levels 2 --format R8_UNORM input/png/basic_RGB8_16x16.png output.ktx2" },
            { "rc": 1, "id": "generate_mipmap_with_runtime_mipmap", "flags": "--generate-mipmap --runtime-mipmap --format R8_UNORM input/png/basic_RGB8_16x16.png output.ktx2" },
            { "rc": 1, "id": "generate_mipmap_with_raw", "flags": "--raw --generate-mipmap --raw --width 8 --height 8 --format R8_UNORM raw_R8_UNORM_2D_8x8.raw output.ktx2" },
            { "rc": 1, "id": "generate_mipmap_with_levels_too_big", "flags": "--generate-mipmap --levels 5 --format R8_UNORM input/png/basic_RGB8_8x8.png output.ktx2" },
            { "rc": 1, "id": "mipmap_filter_without_generate_mipmap", "flags": "--mipmap-filter tent --format R8_UNORM input/png/basic_RGB8_8x8.png output.ktx2" },
            { "rc": 1, "id": "mipmap_filter_invalid", "flags": "--generate-mipmap --mipmap-filter invalid --levels 2 --format R8_UNORM input/png/basic_RGB8_8x8.png output.ktx2" },
            { "rc": 1, "id": "mipmap_filter_invalid_type", "flags": "--generate-mipmap --mipmap-filter 2 --levels 2 --format R8_UNORM input/png/basic_RGB8_8x8.png output.ktx2" },
            { "rc": 1, "id": "mipmap_filter_scale_without_generate_mipmap", "flags": "--mipmap-filter-scale 2.0 --format R8_UNORM input/png/basic_RGB8_8x8.png output.ktx2" },
            { "rc": 1, "id": "mipmap_filter_scale_invalid_type", "flags": "--generate-mipmap --mipmap-filter-scale invalid --format R8_UNORM input/png/basic_RGB8_8x8.png output.ktx2" },
            { "rc": 1, "id": "mipmap_wrap_without_generate_mipmap", "flags": "--mipmap-wrap clamp --format R8_UNORM input/png/basic_RGB8_8x8.png output.ktx2" },
            { "rc": 1, "id": "mipmap_wrap_invalid", "flags": "--generate-mipmap --mipmap-wrap invalid --format R8_UNORM input/png/basic_RGB8_8x8.png output.ktx2" },
            { "rc": 1, "id": "mipmap_wrap_invalid_type", "flags": "--generate-mipmap --mipmap-wrap 1 --format R8_UNORM input/png/basic_RGB8_8x8.png output.ktx2" },
            { "rc": 5, "id": "generate_mipmap_sint_from_half", "flags": "--generate-mipmap --format R8_SINT input/exr/basic_R_HALF_HDR_16x16.exr output.ktx2" },
            { "rc": 5, "id": "generate_mipmap_uint_from_float", "flags": "--generate-mipmap --format R16_UINT input/exr/basic_R_FLOAT_HDR_16x16.exr output.ktx2" },
            { "rc": 5, "id": "generate_mipmap_uint_from_uint", "flags": "--generate-mipmap --format R32_UINT input/exr/basic_R_UINT_16x16.exr output.ktx2" },
            { "rc": 1, "id": "generate_mipmap_3d", "flags": "--generate-mipmap --depth 2 --format R8_UNORM input/png/basic_RGB8_16x16.png input/png/basic_RGB8_16x16.png output.ktx2" },

            { "rc": 1, "id": "raw_too_many_in_2d", "flags": "--raw --width 8 --height 8 --format R8_UNORM input/raw/raw_R8_UNORM_2D_8x8.raw input/raw/raw_R8_UNORM_2D_8x8.raw output.ktx2" },
            { "rc": 1, "id": "raw_too_few_in_2d_array", "flags": "--raw --layers 2 --width 8 --height 8 --format R8_UNORM input/raw/raw_R8_UNORM_2D_8x8.raw output.ktx2" },
            { "rc": 1, "id": "raw_too_many_in_2d_array", "flags": "--raw --layers 2 --width 8 --height 8 --format R8_UNORM input/raw/raw_R8_UNORM_2D_8x8.raw input/raw/raw_R8_UNORM_2D_8x8.raw input/raw/raw_R8_UNORM_2D_8x8.raw output.ktx2" },
            { "rc": 1, "id": "raw_too_few_in_3d_mip", "flags": "--raw --levels 2 --depth 2 --width 8 --height 8 --format R8_UNORM input/raw/raw_R8_UNORM_2D_8x8.raw input/raw/raw_R8_UNORM_2D_8x8.raw output.ktx2" },
            { "rc": 1, "id": "raw_too_many_in_3d_mip", "flags": "--raw --levels 2 --depth 2 --width 8 --height 8 --format R8_UNORM input/raw/raw_R8_UNORM_2D_8x8.raw input/raw/raw_R8_UNORM_2D_8x8.raw input/raw/raw_R8_UNORM_2D_4x4.raw input/raw/raw_R8_UNORM_2D_4x4.raw output.ktx2" },
            { "rc": 1, "id": "raw_too_few_in_cube", "flags": "--cubemap --raw --width 8 --height 8 --format R8_UNORM input/raw/raw_R8_UNORM_2D_8x8.raw input/raw/raw_R8_UNORM_2D_8x8.raw input/raw/raw_R8_UNORM_2D_8x8.raw input/raw/raw_R8_UNORM_2D_8x8.raw input/raw/raw_R8_UNORM_2D_8x8.raw output.ktx2" },
            { "rc": 1, "id": "raw_too_many_in_cube", "flags": "--cubemap --raw --width 8 --height 8 --format R8_UNORM input/raw/raw_R8_UNORM_2D_8x8.raw input/raw/raw_R8_UNORM_2D_8x8.raw input/raw/raw_R8_UNORM_2D_8x8.raw input/raw/raw_R8_UNORM_2D_8x8.raw input/raw/raw_R8_UNORM_2D_8x8.raw input/raw/raw_R8_UNORM_2D_8x8.raw input/raw/raw_R8_UNORM_2D_8x8.raw output.ktx2" },
            { "rc": 1, "id": "png_many_in_2d", "flags": "--format R8_UNORM input/png/basic_RGB8_16x16.png input/png/basic_RGB8_16x16.png output.ktx2" },
            { "rc": 1, "id": "png_few_in_2d_array", "flags": "--layers 2 --format R8_UNORM input/png/basic_RGB8_16x16.png output.ktx2" },
            { "rc": 1, "id": "png_many_in_2d_array", "flags": "--layers 2 --format R8_UNORM input/png/basic_RGB8_16x16.png input/png/basic_RGB8_16x16.png input/png/basic_RGB8_16x16.png output.ktx2" },
            { "rc": 1, "id": "png_few_in_3d_mip", "flags": "--levels 2 --depth 2 --format R8_UNORM input/png/basic_RGB8_16x16.png input/png/basic_RGB8_16x16.png output.ktx2" },
            { "rc": 1, "id": "png_many_in_3d_mip", "flags": "--levels 2 --depth 2 --format R8_UNORM input/png/basic_RGB8_16x16.png input/png/basic_RGB8_16x16.png input/png/basic_RGB8_8x8.png input/png/basic_RGB8_8x8.png output.ktx2" },
            { "rc": 1, "id": "png_few_in_cube", "flags": "--cubemap --format R8_UNORM input/png/basic_RGB8_16x16.png input/png/basic_RGB8_16x16.png input/png/basic_RGB8_16x16.png input/png/basic_RGB8_16x16.png input/png/basic_RGB8_16x16.png output.ktx2" },
            { "rc": 1, "id": "png_many_in_cube", "flags": "--cubemap --format R8_UNORM input/png/basic_RGB8_16x16.png input/png/basic_RGB8_16x16.png input/png/basic_RGB8_16x16.png input/png/basic_RGB8_16x16.png input/png/basic_RGB8_16x16.png input/png/basic_RGB8_16x16.png input/png/basic_RGB8_16x16.png output.ktx2" },
            { "rc": 1, "id": "png_few_in_2d_array_mipgen", "flags": "--generate-mipmap --layers 2 --levels 3 --format R8_UNORM input/png/basic_RGB8_16x16.png output.ktx2" },
            { "rc": 1, "id": "png_many_in_2d_mipgen", "flags": "--generate-mipmap --levels 3 --format R8_UNORM input/png/basic_RGB8_16x16.png input/png/basic_RGB8_16x16.png output.ktx2" },

            { "rc": 1, "id": "swizzle_rgb", "flags": "--swizzle rgb --format R8_UNORM input/png/basic_RGB8_16x16.png output.ktx2" },
            { "rc": 1, "id": "swizzle_rgbz", "flags": "--swizzle rgbz --format R8_UNORM input/png/basic_RGB8_16x16.png output.ktx2" },
            { "rc": 1, "id": "input_swizzle_rgb", "flags": "--swizzle rgb --format R8_UNORM input/png/basic_RGB8_16x16.png output.ktx2" },
            { "rc": 1, "id": "input_swizzle_rgbz", "flags": "--swizzle rgbz --format R8_UNORM input/png/basic_RGB8_16x16.png output.ktx2" },

            { "rc": 3, "id": "cubemap_not_square_raw", "flags": "--cubemap --raw --width 8 --height 1 --format R8_UNORM input/raw/raw_R8_UNORM_1D_8.raw input/raw/raw_R8_UNORM_1D_8.raw input/raw/raw_R8_UNORM_1D_8.raw input/raw/raw_R8_UNORM_1D_8.raw input/raw/raw_R8_UNORM_1D_8.raw input/raw/raw_R8_UNORM_1D_8.raw output.ktx2" },
            { "rc": 3, "id": "cubemap_not_square_png_first", "flags": "--cubemap --format R8_UNORM input/png/basic_RGB8_16x8.png input/png/basic_RGB8_16x16.png input/png/basic_RGB8_16x16.png input/png/basic_RGB8_16x16.png input/png/basic_RGB8_16x16.png input/png/basic_RGB8_16x16.png output.ktx2" },
            { "rc": 3, "id": "cubemap_mismatching_faces_sq", "flags": "--cubemap --format R8_UNORM input/png/basic_RGB8_16x16.png input/png/basic_RGB8_16x16.png input/png/basic_RGB8_16x16.png input/png/basic_RGB8_16x16.png input/png/basic_RGB8_16x16.png input/png/basic_RGB8_16x8.png output.ktx2" },
            { "rc": 3, "id": "cubemap_mismatching_faces_non_sq", "flags": "--cubemap --format R8_UNORM input/png/basic_RGB8_16x16.png input/png/basic_RGB8_16x16.png input/png/basic_RGB8_16x16.png input/png/basic_RGB8_16x16.png input/png/basic_RGB8_16x16.png input/png/basic_RGB8_8x8.png output.ktx2" },
            { "rc": 3, "id": "mismatching_layer_size", "flags": "--format R8_UNORM --layers 2 input/png/basic_RGB8_16x16.png input/png/basic_RGB8_8x8.png output.ktx2" },
            { "rc": 3, "id": "mismatching_depth_size", "flags": "--format R8_UNORM --depth 2 input/png/basic_RGB8_16x16.png input/png/basic_RGB8_8x8.png output.ktx2" },

            { "rc": 3, "id": "unorm_format_from_exr_float", "flags": "--format R8_UNORM input/exr/basic_RGB_HALF_LDR_16x16.exr output.ktx2" },
            { "rc": 3, "id": "unorm_format_from_exr_uint", "flags": "--format R8_UNORM input/exr/basic_RGB_UINT_16x16.exr output.ktx2" },
            { "rc": 3, "id": "sfloat_format_from_png_unorm", "flags": "--format R16_SFLOAT input/png/basic_RGB16_16x16.png output.ktx2" },
            { "rc": 3, "id": "uint_format_from_png_unorm", "flags": "--format R8_UINT input/png/basic_RGB8_16x16.png output.ktx2" },
            { "rc": 3, "id": "sint_format_from_png_unorm", "flags": "--format R8_SINT input/png/basic_RGB8_16x16.png output.ktx2" },
            { "rc": 3, "id": "raw_incorrect_size", "flags": "--raw --width 2 --height 4 --format R8_UNORM input/raw/raw_R8_UNORM_2D_4x4.raw output.ktx2" },
            { "rc": 3, "id": "raw_incorrect_size_mip", "flags": "--raw --levels 2 --width 4 --height 4 --format R8_UNORM input/raw/raw_R8_UNORM_2D_4x4.raw input/raw/raw_R8_UNORM_2D_4x4.raw output.ktx2" },
            { "rc": 3, "id": "png_incorrect_size_mip", "flags": "--levels 2 --format R8_UNORM input/png/basic_RGB8_16x16.png input/png/basic_RGB8_16x16.png output.ktx2" },
            { "rc": 3, "id": "exr_incorrect_size_mip", "flags": "--levels 2 --format R16_SFLOAT input/exr/basic_RGB_HALF_LDR_16x16.exr input/exr/basic_RGB_HALF_LDR_16x16.exr output.ktx2" },
            { "rc": 3, "id": "inconsistent_colorspaces", "flags": "--layers 2 --format R8_UNORM input/png/colorspace_cHRM_ACES.png input/png/colorspace_gamma_2_2.png output.ktx2" },

            { "rc": 1, "id": "zlib_zero", "flags": "--encode basis-lz --zlib 0 --format R8_UNORM input/png/basic_RGB8_16x16.png output.ktx2" },
            { "rc": 1, "id": "zlib_too_big", "flags": "--encode basis-lz --zlib 50 --format R8_UNORM input/png/basic_RGB8_16x16.png output.ktx2" },
            { "rc": 1, "id": "zstd_zero", "flags": "--encode basis-lz --zstd 0 --format R8_UNORM input/png/basic_RGB8_16x16.png output.ktx2" },
            { "rc": 1, "id": "zstd_too_big", "flags": "--encode basis-lz --zstd 50 --format R8_UNORM input/png/basic_RGB8_16x16.png output.ktx2" },
            { "rc": 1, "id": "blze_with_zlib", "flags": "--encode basis-lz --zlib 1 --format R8_UNORM input/png/basic_RGB8_16x16.png output.ktx2" },
            { "rc": 1, "id": "blze_with_zstd", "flags": "--encode basis-lz --zstd 1 --format R8_UNORM input/png/basic_RGB8_16x16.png output.ktx2" },

            { "rc": 1, "id": "astc_1d", "flags": "--1d --format ASTC_4x4_UNORM_BLOCK input/png/basic_RGB8_16x16.png output.ktx2" },
            { "rc": 1, "id": "encode_invalid", "flags": "--encode astc --format R16_UNORM input/png/basic_RGB8_16x16.png output.ktx2" },
            { "rc": 1, "id": "blze_disallowed_format", "flags": "--encode basis-lz --format R16_UNORM input/png/basic_RGB8_16x16.png output.ktx2" },
            { "rc": 1, "id": "uastc_disallowed_format", "flags": "--encode uastc --format R16_UNORM input/png/basic_RGB8_16x16.png output.ktx2" },
            { "rc": 1, "id": "non_encode_compare_ssim", "flags": "--compare-ssim --format R16_UNORM input/png/basic_RGB8_16x16.png output.ktx2" },
            { "rc": 1, "id": "non_encode_compare_psnr", "flags": "--compare-psnr --format R16_UNORM input/png/basic_RGB8_16x16.png output.ktx2" },

            { "rc": 1, "id": "non_astc_fmt_astc_opts1", "flags": "--format R8G8B8A8_UNORM --astc-quality thorough input/png/basic_RGBA8_16x16.png output.ktx2" },
            { "rc": 1, "id": "non_astc_fmt_astc_opts2", "flags": "--format R8G8B8A8_UNORM --astc-perceptual input/png/basic_RGBA8_16x16.png output.ktx2" },
            { "rc": 1, "id": "non_astc_fmt_astc_opts3", "flags": "--format R8G8B8A8_UNORM --astc-quality fast --astc-perceptual input/png/basic_RGBA8_16x16.png output.ktx2" }
        ]
    }
}
